/*
 * BU Navigation plugin - Section Editor integration
 *
 * This file ties in to hooks generated by the navigation plugin scripts
 * while controlling page movements via the "Edit Order" and "Navigation Attributes"
 * metabox.
 *
 * It is responsible for enforcing section editing restrictions.
 */(function(e){if(typeof bu=="undefined"||typeof bu.plugins=="undefined"||typeof bu.plugins.navigation=="undefined")return;var t=function(e,t,n){if(n.config.isSectionEditor){var r=t.o.data("post"),i=t.np.data("post");if(r.post_status!=="publish"&&r.post_type!==n.config.linkPostType)return e;if(t.cr===-1)return!1;if(!r.post_meta.canEdit)return!1;if(!i||!i.post_meta.canEdit)return!1}return e};bu.hooks.addFilter("moveAllowed",t);var n=function(e,t){e.post_meta.canEdit=!0;e.post_meta.canRemove=!0;return e};bu.hooks.addFilter("preInsertPost",n);var r=function(e,t,n){return t?e:!1};bu.hooks.addFilter("navmanCanAddLink",r);var i=function(e,t){var n=t.data("post");!n.post_meta.canEdit&&e.edit&&delete e.edit;!n.post_meta.canRemove&&e.remove&&delete e.remove;return e};bu.hooks.addFilter("navmanOptionsMenuItems",i)})(jQuery);